EESchema Schematic File Version 4
LIBS:gmcontrol-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 8
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 8900 950  1100 850 
U 5AE5B5EB
F0 "phase_driver_1" 60
F1 "phase_driver.sch" 60
F2 "PHASE_H" I L 8900 1500 60 
F3 "PHASE_L" I L 8900 1600 60 
F4 "PHASE" I R 10000 1050 60 
F5 "Vgh" I L 8900 1150 60 
F6 "Vmotor" I L 8900 1050 60 
F7 "GND" I L 8900 1350 60 
F8 "Vgl" I L 8900 1250 60 
F9 "SENSE" I L 8900 1700 60 
$EndSheet
Text Notes 550  1000 0    60   ~ 0
General Motor Controller\n- 4 Phases\n- 3 to 30V\n- 0 to 100% Duty Cycle\n- USB
$Comp
L Connector:USB_B_Micro J1
U 1 1 5AE89038
P 1150 1750
F 0 "J1" H 950 2200 50  0000 L CNN
F 1 "USB_OTG" H 950 2100 50  0000 L CNN
F 2 "gmcontrol:USB_Micro-B" H 1300 1700 50  0001 C CNN
F 3 "" H 1300 1700 50  0001 C CNN
	1    1150 1750
	1    0    0    -1  
$EndComp
$Comp
L Connector:Jack-DC J2
U 1 1 5AE89125
P 1150 2650
F 0 "J2" H 1150 2860 50  0000 C CNN
F 1 "Jack-DC" H 1150 2475 50  0000 C CNN
F 2 "Connector_BarrelJack:BarrelJack_Horizontal" H 1200 2610 50  0001 C CNN
F 3 "" H 1200 2610 50  0001 C CNN
	1    1150 2650
	1    0    0    -1  
$EndComp
$Sheet
S 4050 1400 1250 2450
U 5AE8CF0A
F0 "controller" 60
F1 "controller.sch" 60
F2 "PHASE_1_H" O R 5300 1500 60 
F3 "PHASE_2_H" O R 5300 1800 60 
F4 "PHASE_3_H" O R 5300 2100 60 
F5 "PHASE_1_L" O R 5300 1600 60 
F6 "PHASE_2_L" O R 5300 1900 60 
F7 "PHASE_3_L" O R 5300 2200 60 
F8 "USB_DM" B L 4050 1850 60 
F9 "USB_DP" B L 4050 1750 60 
F10 "SWDIO" B L 4050 2000 60 
F11 "SWDCLK" B L 4050 2100 60 
F12 "PB6" B L 4050 3250 60 
F13 "PB7" B L 4050 3350 60 
F14 "PB3" B L 4050 2950 60 
F15 "PB4" B L 4050 3050 60 
F16 "PB5" B L 4050 3150 60 
F17 "SENSE_1" I R 5300 1700 60 
F18 "SENSE_2" I R 5300 2000 60 
F19 "SENSE_3" I R 5300 2300 60 
F20 "SENSE_4" I R 5300 2600 60 
F21 "SENSE_Vgh" I R 5300 2750 60 
F22 "SENSE_Vgl" I R 5300 2850 60 
F23 "SENSE_Vmotor" I R 5300 3600 60 
F24 "PHASE_4_H" O R 5300 2400 60 
F25 "PHASE_4_L" O R 5300 2500 60 
F26 "CLK_Vgh" O R 5300 3150 60 
F27 "CLK_Vgl" O R 5300 3250 60 
F28 "GND" I L 4050 1600 60 
F29 "PC13" B L 4050 3550 60 
F30 "PC14" B L 4050 3650 60 
F31 "PC15" B L 4050 3750 60 
F32 "PB0" B L 4050 2650 60 
F33 "PB1" B L 4050 2750 60 
F34 "PB2" B L 4050 2850 60 
F35 "VDD" I L 4050 1500 60 
F36 "PA15" B L 4050 2550 60 
F37 "PB12" B L 4050 3450 60 
F38 "RESET" I L 4050 2200 60 
F39 "BOOT0" I L 4050 2300 60 
F40 "PA7" B L 4050 2450 60 
$EndSheet
$Sheet
S 8900 2300 1100 850 
U 5AEA1DF0
F0 "sheet5AEA1DE6" 60
F1 "phase_driver.sch" 60
F2 "PHASE_H" I L 8900 2850 60 
F3 "PHASE_L" I L 8900 2950 60 
F4 "PHASE" I R 10000 2400 60 
F5 "Vgh" I L 8900 2500 60 
F6 "Vmotor" I L 8900 2400 60 
F7 "GND" I L 8900 2700 60 
F8 "Vgl" I L 8900 2600 60 
F9 "SENSE" I L 8900 3050 60 
$EndSheet
$Sheet
S 8900 3650 1100 850 
U 5AEA2A43
F0 "sheet5AEA2A39" 60
F1 "phase_driver.sch" 60
F2 "PHASE_H" I L 8900 4200 60 
F3 "PHASE_L" I L 8900 4300 60 
F4 "PHASE" I R 10000 3750 60 
F5 "Vgh" I L 8900 3850 60 
F6 "Vmotor" I L 8900 3750 60 
F7 "GND" I L 8900 4050 60 
F8 "Vgl" I L 8900 3950 60 
F9 "SENSE" I L 8900 4400 60 
$EndSheet
$Sheet
S 8900 5000 1100 850 
U 5AEA319E
F0 "sheet5AEA3194" 60
F1 "phase_driver.sch" 60
F2 "PHASE_H" I L 8900 5550 60 
F3 "PHASE_L" I L 8900 5650 60 
F4 "PHASE" I R 10000 5100 60 
F5 "Vgh" I L 8900 5200 60 
F6 "Vmotor" I L 8900 5100 60 
F7 "GND" I L 8900 5400 60 
F8 "Vgl" I L 8900 5300 60 
F9 "SENSE" I L 8900 5750 60 
$EndSheet
$Sheet
S 6000 3050 1100 550 
U 5AE7184D
F0 "gate_voltage_supply" 60
F1 "gate_voltage_supply.sch" 60
F2 "CLK_Vgl" I L 6000 3500 60 
F3 "GND" I L 6000 3250 60 
F4 "Vgl" O R 7100 3250 60 
F5 "VIN" I L 6000 3150 60 
F6 "CLK_Vgh" I L 6000 3400 60 
F7 "Vgh" O R 7100 3150 60 
F8 "SENSE_Vgh" O R 7100 3400 60 
F9 "SENSE_Vgl" O R 7100 3500 60 
$EndSheet
$Sheet
S 2200 1200 1150 400 
U 5AEC260A
F0 "power" 60
F1 "power.sch" 60
F2 "Vusb" I L 2200 1300 60 
F3 "Vjack" I L 2200 1400 60 
F4 "GND" I L 2200 1500 60 
F5 "3.3V" O R 3350 1500 60 
F6 "Vmotor" O R 3350 1300 60 
F7 "SENSE_Vmotor" O R 3350 1400 60 
$EndSheet
$Comp
L Connector:Screw_Terminal_01x04 J4
U 1 1 5AEE0660
P 10800 1150
F 0 "J4" H 10800 1350 50  0000 C CNN
F 1 "Screw_Terminal_01x04" H 10800 850 50  0000 C CNN
F 2 "TerminalBlock:TerminalBlock_bornier-4_P5.08mm" H 10800 1150 50  0001 C CNN
F 3 "" H 10800 1150 50  0001 C CNN
	1    10800 1150
	1    0    0    -1  
$EndComp
NoConn ~ 1450 1950
$Comp
L Connector:Conn_01x18_Male J3
U 1 1 5AEF14DA
P 3550 2850
F 0 "J3" H 3550 3750 50  0000 C CNN
F 1 "Conn_01x18" H 3550 1850 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x18_P2.54mm_Vertical" H 3550 2850 50  0001 C CNN
F 3 "" H 3550 2850 50  0001 C CNN
	1    3550 2850
	1    0    0    -1  
$EndComp
Wire Wire Line
	5750 1350 8800 1350
Wire Wire Line
	8800 1350 8800 2700
Wire Wire Line
	8800 2700 8900 2700
Wire Wire Line
	8800 4050 8900 4050
Connection ~ 8800 2700
Wire Wire Line
	8800 5400 8900 5400
Connection ~ 8800 4050
Wire Wire Line
	8700 1250 8700 2600
Wire Wire Line
	8700 3950 8900 3950
Wire Wire Line
	8700 2600 8900 2600
Connection ~ 8700 3950
Wire Wire Line
	8700 1250 8900 1250
Connection ~ 8700 2600
Wire Wire Line
	8900 1150 8600 1150
Wire Wire Line
	8600 1150 8600 2500
Wire Wire Line
	8600 2500 8900 2500
Wire Wire Line
	8600 3850 8900 3850
Connection ~ 8600 2500
Connection ~ 8600 3850
Wire Wire Line
	8500 5100 8900 5100
Wire Wire Line
	8500 1050 8500 2400
Wire Wire Line
	8500 3750 8900 3750
Wire Wire Line
	8500 2400 8900 2400
Connection ~ 8500 3750
Wire Wire Line
	3450 950  5850 950 
Wire Wire Line
	5850 1050 8500 1050
Connection ~ 8500 2400
Wire Wire Line
	5300 1500 8900 1500
Wire Wire Line
	5300 1600 8900 1600
Wire Wire Line
	5300 1700 8900 1700
Wire Wire Line
	8900 2850 8300 2850
Wire Wire Line
	8300 2850 8300 1800
Wire Wire Line
	8300 1800 5300 1800
Wire Wire Line
	5300 1900 8200 1900
Wire Wire Line
	8200 1900 8200 2950
Wire Wire Line
	8200 2950 8900 2950
Wire Wire Line
	8900 3050 8100 3050
Wire Wire Line
	8100 3050 8100 2000
Wire Wire Line
	8900 4200 8000 4200
Wire Wire Line
	8000 4200 8000 2100
Wire Wire Line
	8000 2100 5300 2100
Wire Wire Line
	5300 2200 7900 2200
Wire Wire Line
	7900 2200 7900 4300
Wire Wire Line
	7900 4300 8900 4300
Wire Wire Line
	8900 4400 7800 4400
Wire Wire Line
	7800 4400 7800 2300
Wire Wire Line
	7800 2300 5300 2300
Wire Wire Line
	5300 2400 7700 2400
Wire Wire Line
	7700 2400 7700 5550
Wire Wire Line
	7700 5550 8900 5550
Wire Wire Line
	8900 5650 7600 5650
Wire Wire Line
	7600 5650 7600 2500
Wire Wire Line
	7600 2500 5300 2500
Wire Wire Line
	5300 2600 7500 2600
Wire Wire Line
	7500 2600 7500 5750
Wire Wire Line
	7500 5750 8900 5750
Wire Wire Line
	8600 5200 8900 5200
Wire Wire Line
	8700 5300 8900 5300
Wire Wire Line
	7250 3500 7100 3500
Wire Wire Line
	7100 3400 7350 3400
Wire Wire Line
	7100 3250 8700 3250
Wire Wire Line
	7100 3150 8600 3150
Connection ~ 8700 3250
Connection ~ 8600 3150
Wire Wire Line
	5300 2750 7350 2750
Wire Wire Line
	7350 2750 7350 3400
Wire Wire Line
	7250 3500 7250 2850
Wire Wire Line
	7250 2850 5300 2850
Wire Wire Line
	5300 3150 5550 3150
Wire Wire Line
	5550 3150 5550 3400
Wire Wire Line
	5550 3400 6000 3400
Wire Wire Line
	6000 3500 5450 3500
Wire Wire Line
	5450 3500 5450 3250
Wire Wire Line
	5450 3250 5300 3250
Wire Wire Line
	8100 2000 5300 2000
Wire Wire Line
	2200 1300 1800 1300
Wire Wire Line
	1800 1550 1450 1550
Wire Wire Line
	1150 2150 1150 2300
Wire Wire Line
	2000 1050 2000 1500
Wire Wire Line
	2000 1500 2200 1500
Wire Wire Line
	3550 1050 3550 1600
Wire Wire Line
	3550 1600 4050 1600
Wire Wire Line
	1050 2300 1050 2150
Connection ~ 1150 2300
Wire Wire Line
	2000 2650 1450 2650
Connection ~ 2000 2300
Wire Wire Line
	2000 2750 1450 2750
Connection ~ 2000 2650
Wire Wire Line
	1450 2550 1500 2550
Wire Wire Line
	1900 2550 1900 1400
Wire Wire Line
	1900 1400 2200 1400
Wire Wire Line
	3350 1300 3450 1300
Wire Wire Line
	3450 1300 3450 950 
Connection ~ 8500 1050
Wire Wire Line
	3350 1400 3650 1400
Wire Wire Line
	3650 1400 3650 1150
Wire Wire Line
	3650 1150 5650 1150
Wire Wire Line
	5650 1150 5650 3600
Wire Wire Line
	5850 950  5850 1050
Wire Wire Line
	5850 3150 6000 3150
Wire Wire Line
	2000 1050 3550 1050
Wire Wire Line
	5750 1050 5750 1350
Wire Wire Line
	5750 3250 6000 3250
Connection ~ 5750 1350
Connection ~ 8800 1350
Wire Wire Line
	5650 3600 5300 3600
Connection ~ 5850 1050
Wire Wire Line
	3350 1500 4050 1500
Connection ~ 2000 1500
Connection ~ 3550 1050
Wire Wire Line
	4050 1850 1450 1850
Wire Wire Line
	1450 1750 4050 1750
Wire Wire Line
	10000 1050 10600 1050
Wire Wire Line
	10000 2400 10150 2400
Wire Wire Line
	10150 2400 10150 1150
Wire Wire Line
	10150 1150 10600 1150
Wire Wire Line
	10600 1250 10250 1250
Wire Wire Line
	10250 1250 10250 3750
Wire Wire Line
	10250 3750 10000 3750
Wire Wire Line
	10600 1350 10350 1350
Wire Wire Line
	10350 1350 10350 5100
Wire Wire Line
	10350 5100 10000 5100
Wire Wire Line
	3750 3750 4050 3750
Wire Wire Line
	4050 3650 3750 3650
Wire Wire Line
	3750 3550 4050 3550
Wire Wire Line
	4050 3450 3750 3450
Wire Wire Line
	3750 3350 4050 3350
Wire Wire Line
	4050 3250 3750 3250
Wire Wire Line
	3750 3150 4050 3150
Wire Wire Line
	4050 3050 3750 3050
Wire Wire Line
	3750 2950 4050 2950
Wire Wire Line
	4050 2850 3750 2850
Wire Wire Line
	3750 2750 4050 2750
Wire Wire Line
	3750 2550 4050 2550
Wire Wire Line
	4050 2450 3750 2450
Wire Wire Line
	3750 2350 3950 2350
Wire Wire Line
	3950 2350 3950 2300
Wire Wire Line
	3950 2300 4050 2300
Wire Wire Line
	4050 2200 3900 2200
Wire Wire Line
	3900 2200 3900 2250
Wire Wire Line
	3900 2250 3750 2250
Wire Wire Line
	3750 2150 3800 2150
Wire Wire Line
	3800 2150 3800 2100
Wire Wire Line
	3800 2100 4050 2100
Wire Wire Line
	3750 2050 3800 2050
Wire Wire Line
	3800 2050 3800 2000
Wire Wire Line
	3800 2000 4050 2000
$Comp
L power:PWR_FLAG #FLG02
U 1 1 5AEFBF25
P 1500 2500
F 0 "#FLG02" H 1500 2575 50  0001 C CNN
F 1 "PWR_FLAG" H 1500 2650 50  0000 C CNN
F 2 "" H 1500 2500 50  0001 C CNN
F 3 "" H 1500 2500 50  0001 C CNN
	1    1500 2500
	1    0    0    -1  
$EndComp
Wire Wire Line
	1500 2500 1500 2550
Connection ~ 1500 2550
Wire Wire Line
	8800 2700 8800 4050
Wire Wire Line
	8800 4050 8800 5400
Wire Wire Line
	8700 3950 8700 5300
Wire Wire Line
	8700 2600 8700 3250
Wire Wire Line
	8600 2500 8600 3150
Wire Wire Line
	8600 3850 8600 5200
Wire Wire Line
	8500 3750 8500 5100
Wire Wire Line
	8500 2400 8500 3750
Wire Wire Line
	8700 3250 8700 3950
Wire Wire Line
	8600 3150 8600 3850
Wire Wire Line
	1150 2300 1050 2300
Wire Wire Line
	2000 2300 2000 2650
Wire Wire Line
	2000 2650 2000 2750
Wire Wire Line
	8500 1050 8900 1050
Wire Wire Line
	5750 1350 5750 3250
Wire Wire Line
	8800 1350 8900 1350
Wire Wire Line
	5850 1050 5850 3150
Wire Wire Line
	2000 1500 2000 2300
Wire Wire Line
	3550 1050 5750 1050
Wire Wire Line
	1800 1300 1800 1550
Wire Wire Line
	1500 2550 1900 2550
Wire Wire Line
	4050 2650 3750 2650
Wire Wire Line
	1150 2300 2000 2300
$EndSCHEMATC
